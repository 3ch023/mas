# Check for unstaged changes
if ! git diff-index --quiet HEAD --; then
  echo "uou have unstaged or uncommitted files. commit, stash or discard your changes before pushing."
  exit 1
fi

# Check for uncommitted changes
if ! git diff --cached --quiet; then
  echo "you have unstaged or uncommitted files. commit, stash or discard your changes before pushing."
  exit 1
fi

#build artifacts
npm run build:precommit
echo "successfully built /libs and mas.js"
git add libs
git add mas.js
git commit -m '[pre-push hook] commit artifacts'
echo "committed /libs and mas.js"